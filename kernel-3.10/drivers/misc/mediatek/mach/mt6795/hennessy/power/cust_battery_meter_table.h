#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             24000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#endif

#define RBAT_PULL_UP_VOLT          2800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}
    };
#endif
// Reversed table. TODO: Need to add table and correct battery_meter.c
// BATT_TEMPERATURE Batt_Temperature_Table[] = {
//     {-20,600},
//     {-15,667700},
//     {-10,502600},
//     { -5,381700},
//     {  0,292300},
//     {  5,225400},
//     { 10,175100},
//     { 15,136900},
//     { 20,107800},
//     { 25,85350},
//     { 30,68000},
//     { 35,54500},
//     { 40,43930},
//     { 45,35610},
//     { 50,29020},
//     { 55,23770},
//     { 60,19580}
// };


// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0,4173},
	{1,4124},
	{3,4087},
	{5,4066},
	{6,4055},
	{8,4048},
	{10,4043},
	{11,4040},
	{13,4037},
	{15,4034},
	{16,4031},
	{18,4027},
	{20,4023},
	{21,4017},
	{23,4011},
	{25,4003},
	{26,3996},
	{28,3987},
	{30,3977},
	{32,3967},
	{33,3957},
	{35,3946},
	{37,3935},
	{38,3924},
	{40,3914},
	{42,3905},
	{43,3897},
	{45,3890},
	{47,3883},
	{48,3877},
	{50,3872},
	{52,3866},
	{53,3861},
	{55,3856},
	{57,3850},
	{59,3845},
	{60,3841},
	{62,3834},
	{64,3829},
	{65,3823},
	{67,3816},
	{69,3809},
	{70,3801},
	{72,3790},
	{74,3778},
	{75,3763},
	{77,3745},
	{79,3723},
	{80,3698},
	{82,3673},
	{84,3649},
	{86,3626},
	{87,3606},
	{89,3587},
	{91,3568},
	{92,3550},
	{94,3532},
	{95,3516},
	{96,3511},
	{97,3508},
	{97,3506},
	{97,3504},
	{97,3502},
	{98,3501},
	{98,3500},
	{98,3498},
	{98,3499},
	{98,3497},
	{98,3497},
	{99,3495},
	{99,3495},
	{99,3495},
	{99,3494},
	{99,3494},
	{99,3493},
	{99,3493},
	{99,3492},
	{99,3491},
	{99,3491},
	{99,3490},
	{99,3489},
	{100,3400}
};

// T1 0C
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0,4180},
	{1,4131},
	{3,4095},
	{4,4074},
	{6,4062},
	{7,4054},
	{9,4049},
	{11,4045},
	{12,4042},
	{14,4040},
	{15,4038},
	{17,4035},
	{19,4032},
	{20,4029},
	{22,4025},
	{23,4022},
	{25,4016},
	{26,4010},
	{28,4002},
	{30,3994},
	{31,3985},
	{33,3975},
	{34,3965},
	{36,3954},
	{37,3943},
	{39,3932},
	{41,3921},
	{42,3910},
	{44,3901},
	{45,3893},
	{47,3887},
	{49,3880},
	{50,3874},
	{52,3868},
	{53,3864},
	{55,3859},
	{56,3854},
	{58,3848},
	{60,3842},
	{61,3837},
	{63,3832},
	{64,3827},
	{66,3820},
	{68,3811},
	{69,3804},
	{71,3793},
	{72,3781},
	{74,3765},
	{75,3745},
	{77,3722},
	{79,3696},
	{80,3669},
	{82,3646},
	{83,3624},
	{85,3604},
	{87,3584},
	{88,3567},
	{90,3549},
	{91,3530},
	{93,3512},
	{94,3499},
	{96,3485},
	{97,3471},
	{98,3461},
	{98,3453},
	{98,3446},
	{99,3439},
	{99,3433},
	{99,3428},
	{99,3424},
	{99,3421},
	{99,3417},
	{99,3414},
	{99,3412},
	{99,3409},
	{99,3408},
	{99,3406},
	{99,3403},
	{100,3402},
	{100,3400},
	{100,3399},
	{100,3396}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0,4191},
	{1,4164},
	{3,4138},
	{4,4106},
	{6,4082},
	{7,4067},
	{9,4058},
	{10,4052},
	{12,4048},
	{13,4044},
	{15,4043},
	{16,4041},
	{18,4039},
	{19,4038},
	{21,4037},
	{23,4035},
	{24,4033},
	{26,4031},
	{27,4027},
	{29,4023},
	{30,4017},
	{32,4009},
	{33,3998},
	{35,3986},
	{36,3973},
	{38,3959},
	{39,3946},
	{41,3935},
	{42,3924},
	{44,3915},
	{46,3906},
	{47,3896},
	{49,3887},
	{50,3881},
	{52,3877},
	{53,3872},
	{55,3868},
	{56,3863},
	{58,3858},
	{59,3853},
	{61,3848},
	{62,3844},
	{64,3837},
	{65,3832},
	{67,3825},
	{69,3818},
	{70,3810},
	{72,3799},
	{73,3787},
	{75,3772},
	{76,3755},
	{78,3734},
	{79,3709},
	{81,3683},
	{82,3656},
	{84,3633},
	{85,3613},
	{87,3594},
	{89,3575},
	{90,3558},
	{92,3541},
	{93,3524},
	{95,3507},
	{96,3492},
	{98,3470},
	{99,3416},
	{100,3327},
	{100,3291},
	{100,3281},
	{100,3277},
	{100,3274},
	{100,3273},
	{100,3272},
	{100,3271},
	{100,3270},
	{100,3270},
	{100,3269},
	{100,3270},
	{100,3269},
	{100,3269},
	{100,3269},
	{100,3268}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0,4195},
	{1,4170},
	{3,4143},
	{4,4111},
	{6,4086},
	{7,4072},
	{9,4063},
	{10,4057},
	{12,4052},
	{13,4048},
	{15,4044},
	{17,4042},
	{18,4040},
	{20,4037},
	{21,4034},
	{23,4032},
	{24,4029},
	{26,4025},
	{27,4020},
	{29,4014},
	{31,4007},
	{32,3999},
	{34,3989},
	{35,3979},
	{37,3969},
	{38,3959},
	{40,3949},
	{41,3940},
	{43,3934},
	{44,3926},
	{46,3915},
	{48,3902},
	{49,3894},
	{51,3887},
	{52,3881},
	{54,3876},
	{55,3869},
	{57,3864},
	{58,3858},
	{60,3852},
	{61,3847},
	{63,3841},
	{65,3835},
	{66,3830},
	{68,3823},
	{69,3816},
	{71,3807},
	{72,3797},
	{74,3783},
	{75,3765},
	{77,3742},
	{79,3717},
	{80,3691},
	{82,3665},
	{83,3641},
	{85,3619},
	{86,3599},
	{88,3580},
	{89,3562},
	{91,3545},
	{92,3528},
	{94,3514},
	{96,3500},
	{97,3482},
	{99,3441},
	{100,3365},
	{100,3270},
	{100,3262},
	{100,3260},
	{100,3256},
	{100,3256},
	{100,3255},
	{100,3254},
	{100,3253},
	{100,3254},
	{100,3254},
	{100,3253},
	{100,3253},
	{100,3253},
	{100,3252},
	{100,3253},
	{100,3252}
};

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{285,4173},
	{332,4124},
	{325,4087},
	{320,4066},
	{322,4055},
	{325,4048},
	{327,4043},
	{335,4040},
	{345,4037},
	{355,4034},
	{365,4031},
	{372,4027},
	{385,4023},
	{392,4017},
	{400,4011},
	{400,4003},
	{405,3996},
	{407,3987},
	{402,3977},
	{400,3967},
	{397,3957},
	{390,3946},
	{377,3935},
	{370,3924},
	{362,3914},
	{352,3905},
	{350,3897},
	{345,3890},
	{342,3883},
	{342,3877},
	{347,3872},
	{347,3866},
	{345,3861},
	{347,3856},
	{347,3850},
	{352,3845},
	{357,3841},
	{355,3834},
	{362,3829},
	{367,3823},
	{370,3816},
	{380,3809},
	{392,3801},
	{400,3790},
	{417,3778},
	{442,3763},
	{472,3745},
	{492,3723},
	{507,3698},
	{517,3673},
	{530,3649},
	{537,3626},
	{557,3606},
	{580,3587},
	{610,3568},
	{652,3550},
	{720,3532},
	{792,3516},
	{780,3511},
	{770,3508},
	{765,3506},
	{762,3504},
	{757,3502},
	{755,3501},
	{752,3500},
	{750,3498},
	{747,3499},
	{742,3497},
	{745,3497},
	{740,3495},
	{742,3495},
	{740,3495},
	{740,3494},
	{740,3494},
	{735,3493},
	{740,3493},
	{732,3492},
	{732,3491},
	{737,3491},
	{725,3490},
	{732,3489},
	{500,3400}
};

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{213,4180},
	{222,4131},
	{222,4095},
	{215,4074},
	{210,4062},
	{210,4054},
	{210,4049},
	{212,4045},
	{215,4042},
	{222,4040},
	{227,4038},
	{232,4035},
	{240,4032},
	{245,4029},
	{252,4025},
	{260,4022},
	{265,4016},
	{270,4010},
	{270,4002},
	{272,3994},
	{272,3985},
	{275,3975},
	{272,3965},
	{267,3954},
	{265,3943},
	{257,3932},
	{247,3921},
	{237,3910},
	{232,3901},
	{227,3893},
	{225,3887},
	{222,3880},
	{220,3874},
	{220,3868},
	{220,3864},
	{220,3859},
	{222,3854},
	{222,3848},
	{222,3842},
	{227,3837},
	{230,3832},
	{235,3827},
	{237,3820},
	{237,3811},
	{245,3804},
	{250,3793},
	{257,3781},
	{267,3765},
	{275,3745},
	{285,3722},
	{290,3696},
	{287,3669},
	{292,3646},
	{295,3624},
	{300,3604},
	{302,3584},
	{315,3567},
	{330,3549},
	{347,3530},
	{372,3512},
	{427,3499},
	{537,3485},
	{677,3471},
	{652,3461},
	{635,3453},
	{617,3446},
	{600,3439},
	{587,3433},
	{575,3428},
	{565,3424},
	{552,3421},
	{552,3417},
	{542,3414},
	{535,3412},
	{527,3409},
	{530,3408},
	{527,3406},
	{512,3403},
	{515,3402},
	{505,3400},
	{510,3399},
	{507,3396}
};

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{125,4191},
	{152,4164},
	{157,4138},
	{147,4106},
	{145,4082},
	{142,4067},
	{140,4058},
	{140,4052},
	{137,4048},
	{135,4044},
	{137,4043},
	{137,4041},
	{137,4039},
	{140,4038},
	{145,4037},
	{145,4035},
	{147,4033},
	{152,4031},
	{152,4027},
	{155,4023},
	{157,4017},
	{162,4009},
	{162,3998},
	{167,3986},
	{170,3973},
	{172,3959},
	{172,3946},
	{172,3935},
	{170,3924},
	{170,3915},
	{165,3906},
	{155,3896},
	{150,3887},
	{145,3881},
	{147,3877},
	{145,3872},
	{145,3868},
	{145,3863},
	{142,3858},
	{142,3853},
	{145,3848},
	{150,3844},
	{147,3837},
	{147,3832},
	{150,3825},
	{152,3818},
	{152,3810},
	{155,3799},
	{155,3787},
	{152,3772},
	{155,3755},
	{155,3734},
	{152,3709},
	{152,3683},
	{145,3656},
	{147,3633},
	{150,3613},
	{150,3594},
	{150,3575},
	{152,3558},
	{152,3541},
	{155,3524},
	{157,3507},
	{172,3492},
	{187,3470},
	{197,3416},
	{232,3327},
	{227,3291},
	{205,3281},
	{195,3277},
	{187,3274},
	{182,3273},
	{180,3272},
	{180,3271},
	{175,3270},
	{177,3270},
	{175,3269},
	{177,3270},
	{175,3269},
	{177,3269},
	{177,3269},
	{172,3268}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{103,4195},
	{132,4170},
	{135,4143},
	{130,4111},
	{127,4086},
	{127,4072},
	{127,4063},
	{127,4057},
	{127,4052},
	{125,4048},
	{125,4044},
	{127,4042},
	{127,4040},
	{127,4037},
	{127,4034},
	{130,4032},
	{132,4029},
	{132,4025},
	{132,4020},
	{132,4014},
	{135,4007},
	{135,3999},
	{135,3989},
	{137,3979},
	{140,3969},
	{140,3959},
	{140,3949},
	{142,3940},
	{152,3934},
	{152,3926},
	{145,3915},
	{135,3902},
	{132,3894},
	{130,3887},
	{127,3881},
	{127,3876},
	{127,3869},
	{130,3864},
	{130,3858},
	{130,3852},
	{132,3847},
	{132,3841},
	{135,3835},
	{137,3830},
	{137,3823},
	{137,3816},
	{137,3807},
	{140,3797},
	{137,3783},
	{140,3765},
	{135,3742},
	{135,3717},
	{132,3691},
	{135,3665},
	{132,3641},
	{132,3619},
	{132,3599},
	{132,3580},
	{132,3562},
	{135,3545},
	{135,3528},
	{137,3514},
	{140,3500},
	{145,3482},
	{147,3441},
	{157,3365},
	{175,3270},
	{157,3262},
	{150,3260},
	{142,3256},
	{140,3256},
	{140,3255},
	{137,3254},
	{135,3253},
	{137,3254},
	{137,3254},
	{135,3253},
	{137,3253},
	{132,3253},
	{135,3252},
	{132,3253},
	{130,3252}
};

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

